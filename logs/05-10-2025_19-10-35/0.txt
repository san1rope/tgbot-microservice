mtprotosender.py:228 #INFO     [2025-10-05 19:10:35,747] - telethon.network.mtprotosender - 0| Connecting to 149.154.167.92:443/TcpFull...
mtprotosender.py:279 #INFO     [2025-10-05 19:10:35,788] - telethon.network.mtprotosender - 0| Connection to 149.154.167.92:443/TcpFull complete!
utils.py:63 #INFO     [2025-10-05 19:10:36,162] - root - 0| Client has been connected!
utils.py:63 #INFO     [2025-10-05 19:10:36,162] - root - 0| Redis has been initialized!
utils.py:63 #INFO     [2025-10-05 19:10:36,162] - root - 0| Prepare to load data in redis...
utils.py:63 #INFO     [2025-10-05 19:10:36,162] - root - 0| Loading messages data from small groups...
utils.py:63 #INFO     [2025-10-05 19:10:36,458] - root - 0| Data from small groups has been loaded!
utils.py:63 #INFO     [2025-10-05 19:10:36,458] - root - 0| Event handlers has been registered!
utils.py:63 #INFO     [2025-10-05 19:10:44,086] - root - 0| Event called. NewMessage
utils.py:63 #INFO     [2025-10-05 19:10:44,377] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/create 
<pre>{
  "type": "message_created",
  "chat_id": -4926216127,
  "message_id": 131,
  "text": "msg2341",
  "message_type": 1,
  "topic_id": null,
  "sender": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "chat_info": {
    "title": "okok",
    "username": null,
    "type": "chat",
    "is_forum": false,
    "member_count": 2
  },
  "timestamp": "2025-10-05T16:10:43Z",
  "media": null
}</pre>
utils.py:63 #INFO     [2025-10-05 19:11:07,790] - root - 0| Event called. ChatAction. action: MessageActionChatDeleteUser
utils.py:63 #INFO     [2025-10-05 19:11:20,857] - root - 0| Event called: ChatAction. action: MessageActionChatAddUser
utils.py:63 #INFO     [2025-10-05 19:11:21,265] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/bot_added 
<pre>{
  "type": "bot_added_to_chat",
  "chat_id": -4926216127,
  "chat_info": {
    "title": "okok",
    "username": null,
    "type": "chat",
    "is_forum": false,
    "member_count": 2
  },
  "owner_info": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "added_by": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "timestamp": "2025-10-05T16:11:20Z"
}</pre>
utils.py:63 #INFO     [2025-10-05 19:12:28,769] - root - 0| Event called. NewMessage
utils.py:63 #INFO     [2025-10-05 19:12:29,199] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/create 
<pre>{
  "type": "message_created",
  "chat_id": -4926216127,
  "message_id": 138,
  "text": "message",
  "message_type": 1,
  "topic_id": null,
  "sender": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "chat_info": {
    "title": "okok",
    "username": null,
    "type": "chat",
    "is_forum": false,
    "member_count": 2
  },
  "timestamp": "2025-10-05T16:12:28Z",
  "media": null
}</pre>
utils.py:63 #INFO     [2025-10-05 19:12:47,578] - root - 0| Event called. MessageEdited
utils.py:63 #INFO     [2025-10-05 19:12:47,767] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/update 
<pre>{
  "type": "message_update",
  "chat_id": -4926216127,
  "message_id": 138,
  "text": "message1245",
  "message_type": 1,
  "topic_id": null,
  "sender": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "chat_info": {
    "title": "okok",
    "username": null,
    "type": "chat",
    "is_forum": false,
    "member_count": 2
  },
  "timestamp": "2025-10-05T16:12:28Z",
  "media": null
}</pre>
utils.py:63 #INFO     [2025-10-05 19:13:18,360] - root - 0| Event called. MessageDeleted
utils.py:63 #INFO     [2025-10-05 19:13:18,699] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/delete 
<pre>{
  "type": "message_deleted",
  "chat_id": -4926216127,
  "message_ids": [
    138
  ],
  "topic_id": null,
  "deleted_by": null,
  "chat_info": {
    "title": "okok",
    "username": null,
    "type": "chat",
    "is_forum": false,
    "member_count": 2
  },
  "timestamp": "2025-10-05T16:13:18Z"
}</pre>
utils.py:63 #INFO     [2025-10-05 19:13:40,163] - root - 0| Event called: ChatAction. action: MessageActionChatAddUser
utils.py:63 #INFO     [2025-10-05 19:13:40,513] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/bot_added 
<pre>{
  "type": "bot_added_to_chat",
  "chat_id": -1002975286347,
  "chat_info": {
    "title": "aosdlas",
    "username": null,
    "type": "supergroup",
    "is_forum": true,
    "member_count": 2
  },
  "owner_info": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "added_by": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "timestamp": "2025-10-05T16:13:39Z"
}</pre>
updates.py:443 #INFO     [2025-10-05 19:13:57,101] - telethon.client.updates - 0| Got difference for channel 2975286347 updates
utils.py:63 #INFO     [2025-10-05 19:13:57,101] - root - 0| Event called. NewMessage
utils.py:63 #INFO     [2025-10-05 19:13:57,517] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/topic_created 
<pre>{
  "type": "topic_created",
  "chat_id": -1002975286347,
  "topic_id": 93,
  "title": "topictext1",
  "icon_color": 7322096,
  "created_by": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "chat_info": {
    "title": "aosdlas",
    "username": null,
    "type": "supergroup",
    "is_forum": true,
    "member_count": 2
  },
  "timestamp": "2025-10-05T16:13:55Z"
}</pre>
utils.py:63 #INFO     [2025-10-05 19:13:57,611] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/create 
<pre>{
  "type": "message_created",
  "chat_id": -1002975286347,
  "message_id": 94,
  "text": "bomba",
  "message_type": 1,
  "topic_id": 93,
  "sender": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "chat_info": {
    "title": "aosdlas",
    "username": null,
    "type": "supergroup",
    "is_forum": true,
    "member_count": 2
  },
  "timestamp": "2025-10-05T16:13:55Z",
  "media": null
}</pre>
utils.py:63 #INFO     [2025-10-05 19:14:03,552] - root - 0| Event called. MessageEdited
utils.py:63 #INFO     [2025-10-05 19:14:03,860] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/update 
<pre>{
  "type": "message_update",
  "chat_id": -1002975286347,
  "message_id": 94,
  "text": "veirtfya",
  "message_type": 1,
  "topic_id": 93,
  "sender": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "chat_info": {
    "title": "aosdlas",
    "username": null,
    "type": "supergroup",
    "is_forum": true,
    "member_count": 2
  },
  "timestamp": "2025-10-05T16:13:55Z",
  "media": null
}</pre>
utils.py:63 #INFO     [2025-10-05 19:14:06,304] - root - 0| Event called. NewMessage
utils.py:63 #INFO     [2025-10-05 19:14:06,620] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/create 
<pre>{
  "type": "message_created",
  "chat_id": -1002975286347,
  "message_id": 95,
  "text": "asdl",
  "message_type": 1,
  "topic_id": 93,
  "sender": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "chat_info": {
    "title": "aosdlas",
    "username": null,
    "type": "supergroup",
    "is_forum": true,
    "member_count": 2
  },
  "timestamp": "2025-10-05T16:14:05Z",
  "media": null
}</pre>
utils.py:63 #INFO     [2025-10-05 19:14:10,877] - root - 0| Event called. NewMessage
utils.py:63 #INFO     [2025-10-05 19:14:11,087] - root - 0| Request. status: 200. https://tenerife.chat/chat/webhook/telegram/create 
<pre>{
  "type": "message_created",
  "chat_id": -1002975286347,
  "message_id": 96,
  "text": "tq",
  "message_type": 1,
  "topic_id": 93,
  "sender": {
    "id": 1643710214,
    "first_name": "san1rope",
    "username": "san1roped",
    "language_code": null
  },
  "chat_info": {
    "title": "aosdlas",
    "username": null,
    "type": "supergroup",
    "is_forum": true,
    "member_count": 2
  },
  "timestamp": "2025-10-05T16:14:10Z",
  "media": null
}</pre>
utils.py:63 #INFO     [2025-10-05 19:14:13,752] - root - 0| Event called. MessageDeleted
updates.py:590 #ERROR    [2025-10-05 19:14:14,055] - telethon.client.updates - 0| Unhandled exception on event_message_deleted
Traceback (most recent call last):
  File "C:\Users\Valentyn\PycharmProjects\tgbot-microservice\.venv\lib\site-packages\telethon\client\updates.py", line 574, in _dispatch_update
    await callback(event)
  File "C:\Users\Valentyn\PycharmProjects\tgbot-microservice\app\handlers.py", line 118, in event_message_deleted
    if result["type"] == "delete_messages":
TypeError: tuple indices must be integers or slices, not str
utils.py:63 #INFO     [2025-10-05 19:14:17,338] - root - 0| Event called. MessageDeleted
updates.py:590 #ERROR    [2025-10-05 19:14:17,634] - telethon.client.updates - 0| Unhandled exception on event_message_deleted
Traceback (most recent call last):
  File "C:\Users\Valentyn\PycharmProjects\tgbot-microservice\.venv\lib\site-packages\telethon\client\updates.py", line 574, in _dispatch_update
    await callback(event)
  File "C:\Users\Valentyn\PycharmProjects\tgbot-microservice\app\handlers.py", line 118, in event_message_deleted
    if result["type"] == "delete_messages":
TypeError: tuple indices must be integers or slices, not str
mtprotosender.py:319 #INFO     [2025-10-05 19:15:09,554] - telethon.network.mtprotosender - 0| Disconnecting from 149.154.167.92:443/TcpFull...
mtprotosender.py:339 #INFO     [2025-10-05 19:15:09,555] - telethon.network.mtprotosender - 0| Disconnection from 149.154.167.92:443/TcpFull complete!
